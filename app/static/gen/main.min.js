const container=document.querySelector('.carrossel-container');const cards=Array.from(document.querySelectorAll('.modelo-card'));const btnEsquerda=document.querySelector('.seta-esquerda');const btnDireita=document.querySelector('.seta-direita');const totalCards=cards.length;let centerIndex=Math.floor(totalCards/2);const visibleCardsCount=5;const maxOffset=Math.floor(visibleCardsCount/2);function updateCarousel(){cards.forEach((card,i)=>{let offset=i-centerIndex;if(offset>totalCards/2)offset-=totalCards;if(offset<-totalCards/2)offset+=totalCards;if(Math.abs(offset)>maxOffset){card.style.opacity=0;card.style.pointerEvents='none';card.style.transform=`translate(-50%,-50%)translateX(0)scale(0)`;return;}
card.style.opacity=1;card.style.pointerEvents='auto';const spacing=160;const x=offset*spacing;const scale=1-Math.abs(offset)*0.2;const zIndex=visibleCardsCount-Math.abs(offset);card.style.transform=`translate(-50%,-50%)translateX(${x}px)scale(${scale})`;card.style.zIndex=zIndex;});}
btnEsquerda.addEventListener('click',()=>{centerIndex=(centerIndex-1+totalCards)%totalCards;updateCarousel();});btnDireita.addEventListener('click',()=>{centerIndex=(centerIndex+1)%totalCards;updateCarousel();});updateCarousel();const menuBtn=document.getElementById("menuBtn");const navLinks=document.getElementById("navLinks");menuBtn.onclick=()=>{navLinks.classList.toggle("open");}
document.addEventListener("DOMContentLoaded",()=>{const modal=document.getElementById("modalEnsaio");const modalImg=document.getElementById("imgModal");const closeBtn=modal.querySelector(".modal-close");const prevBtn=modal.querySelector(".modal-prev");const nextBtn=modal.querySelector(".modal-next");const thumbnailsContainer=document.getElementById("thumbnailsContainer");const modalSelecao=document.getElementById("modalSelecao");const listaEnsaios=document.getElementById("listaEnsaios");const closeSelecao=document.getElementById("closeSelecao");let fotos=[];let indiceAtual=0;document.querySelectorAll('.card .ver').forEach(el=>{el.addEventListener('click',(e)=>{const modeloData=el.closest('.card').dataset.modelo;const modelo=JSON.parse(modeloData.replace(/&quot;/g,'"'));abrirSelecaoEnsaio(modelo);});});function abrirSelecaoEnsaio(modelo){listaEnsaios.innerHTML="";modelo.ensaios.forEach((ensaio,i)=>{const btn=document.createElement("button");btn.textContent=ensaio.titulo;btn.addEventListener('click',()=>abrirModalEnsaios(modelo,i));listaEnsaios.appendChild(btn);});modalSelecao.classList.add("show");}
function fecharSelecao(){modalSelecao.classList.remove("show");}
function abrirModalEnsaios(modelo,indiceEnsaio){const ensaio=modelo.ensaios[indiceEnsaio];fotos=ensaio.fotos.map(f=>f.replace("../../../","/"));indiceAtual=0;modal.classList.add("show");mostrarImagem(indiceAtual);renderizarMiniaturas();fecharSelecao();}
function mostrarImagem(indice){indiceAtual=indice;modalImg.src=fotos[indiceAtual];const thumbs=thumbnailsContainer.querySelectorAll("img");thumbs.forEach((img,i)=>img.classList.toggle("active",i===indiceAtual));}
function mostrarProximo(){mostrarImagem((indiceAtual+1)%fotos.length);}
function mostrarAnterior(){mostrarImagem((indiceAtual-1+fotos.length)%fotos.length);}
function renderizarMiniaturas(){thumbnailsContainer.innerHTML="";fotos.forEach((foto,i)=>{const img=document.createElement("img");img.src=foto;img.addEventListener("click",()=>mostrarImagem(i));if(i===indiceAtual)img.classList.add("active");thumbnailsContainer.appendChild(img);});}
nextBtn.addEventListener("click",e=>{e.stopPropagation();mostrarProximo();});prevBtn.addEventListener("click",e=>{e.stopPropagation();mostrarAnterior();});closeBtn.addEventListener("click",()=>modal.classList.remove("show"));modal.addEventListener("click",()=>modal.classList.remove("show"));modalImg.addEventListener("click",e=>e.stopPropagation());closeSelecao.addEventListener("click",fecharSelecao);document.addEventListener("keydown",e=>{if(modal.classList.contains("show")){if(e.key==="ArrowRight")mostrarProximo();if(e.key==="ArrowLeft")mostrarAnterior();if(e.key==="Escape")modal.classList.remove("show");}
if(modalSelecao.classList.contains("show")&&e.key==="Escape"){fecharSelecao();}});});document.addEventListener("DOMContentLoaded",function(){const modal=document.getElementById("modalFoto");const modalImg=document.getElementById("imgModal");const closeBtn=modal.querySelector(".modal-close");const prevBtn=modal.querySelector(".modal-prev");const nextBtn=modal.querySelector(".modal-next");const thumbnailsContainer=document.getElementById("thumbnailsContainer");let fotos=[];let indiceAtual=0;const ensaiosDiv=document.querySelectorAll(".ensaio");ensaiosDiv.forEach(ensaioDiv=>{const imgs=ensaioDiv.querySelectorAll("img");imgs.forEach((img,idx)=>{img.addEventListener("click",(e)=>{e.stopPropagation();fotos=Array.from(imgs).map(i=>i.src);indiceAtual=idx;mostrarImagem(indiceAtual);modal.style.display="flex";renderizarMiniaturas();});});});function mostrarImagem(indice){indiceAtual=indice;modalImg.src=fotos[indiceAtual];const thumbs=thumbnailsContainer.querySelectorAll("img");thumbs.forEach((thumb,i)=>thumb.classList.toggle("active",i===indiceAtual));}
function mostrarProximo(){mostrarImagem((indiceAtual+1)%fotos.length);}
function mostrarAnterior(){mostrarImagem((indiceAtual-1+fotos.length)%fotos.length);}
function renderizarMiniaturas(){thumbnailsContainer.innerHTML="";fotos.forEach((foto,i)=>{const img=document.createElement("img");img.src=foto;img.addEventListener("click",()=>mostrarImagem(i));if(i===indiceAtual)img.classList.add("active");thumbnailsContainer.appendChild(img);});}
nextBtn.addEventListener("click",e=>{e.stopPropagation();mostrarProximo();});prevBtn.addEventListener("click",e=>{e.stopPropagation();mostrarAnterior();});closeBtn.addEventListener("click",()=>modal.style.display="none");modal.addEventListener("click",()=>modal.style.display="none");modalImg.addEventListener("click",e=>e.stopPropagation());document.addEventListener("keydown",(e)=>{if(modal.style.display==="flex"){if(e.key==="ArrowRight")mostrarProximo();if(e.key==="ArrowLeft")mostrarAnterior();if(e.key==="Escape")modal.style.display="none";}});});const menuBtn=document.getElementById("menuBtn");const navLinks=document.getElementById("navLinks");menuBtn.onclick=()=>{navLinks.classList.toggle("open");};