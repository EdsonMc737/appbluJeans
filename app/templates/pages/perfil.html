{% extends 'template/base.html' %}
{% block template %}

<<<<<<< HEAD
<div class="perfil-header" style="background-image: url('{{ url_for('static', filename='img/capas/' ~ modelo.capa) }}');">
    <img class="perfil-avatar" src="{{ url_for('static', filename='img/destaques/' ~ modelo.imagem) }}" alt="{{ modelo.nome }}">
    <div class="perfil-info">
        <h1>{{ modelo.nome }}</h1>
        <p>{{ modelo.descricao }}</p>
        <div class="perfil-actions">
            <button>Seguir</button>
            <button>Mensagem</button>
            <button>Curtir</button>
        </div>
    </div>
</div>
=======
{% include "component/perfilface.html" %}
>>>>>>> ace7ced (Implementado js e outras funcionalidades)

<!-- Ensaios FotogrÃ¡ficos -->
<div class="ensaios">
    {% if modelo.ensaios %}
        {% for ensaio in modelo.ensaios %}
            <div class="ensaio" data-ensaio="{{ loop.index0 }}">
                <h2>{{ ensaio.titulo }}</h2>
                <p>{{ ensaio.descricao }}</p>
                <div class="fotos-ensaio">
                    {% for foto in ensaio.fotos %}
                        <img src="{{ url_for('static', filename=foto) }}" alt="{{ ensaio.titulo }}">
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>

<!-- Modal para ampliar fotos -->
<div id="modalFoto" class="modal">
    <span class="modal-close">&times;</span>
    <span class="modal-prev">&#10094;</span>
    <span class="modal-next">&#10095;</span>
    <div class="modal-main">
        <img class="modal-content" id="imgModal">
    </div>
    <div class="modal-thumbnails" id="thumbnailsContainer"></div>
</div>

<<<<<<< HEAD
<script>
document.addEventListener("DOMContentLoaded", function() {
    const modal = document.getElementById("modalFoto");
    const modalImg = document.getElementById("imgModal");
    const closeBtn = modal.querySelector(".modal-close");
    const prevBtn = modal.querySelector(".modal-prev");
    const nextBtn = modal.querySelector(".modal-next");
    const thumbnailsContainer = document.getElementById("thumbnailsContainer");

    let fotos = [];
    let indiceAtual = 0;

    // Carregar apenas fotos do ensaio clicado
    const ensaiosDiv = document.querySelectorAll(".ensaio");
    ensaiosDiv.forEach(ensaioDiv => {
        const imgs = ensaioDiv.querySelectorAll("img");
        imgs.forEach((img, idx) => {
            img.addEventListener("click", (e) => {
                e.stopPropagation();
                fotos = Array.from(imgs).map(i => i.src);
                indiceAtual = idx;
                mostrarImagem(indiceAtual);
                modal.style.display = "flex";
                renderizarMiniaturas();
            });
        });
    });

    function mostrarImagem(indice) {
        indiceAtual = indice;
        modalImg.src = fotos[indiceAtual];

        // Atualiza destaque das miniaturas
        const thumbs = thumbnailsContainer.querySelectorAll("img");
        thumbs.forEach((thumb, i) => thumb.classList.toggle("active", i === indiceAtual));
    }

    function mostrarProximo() {
        mostrarImagem((indiceAtual + 1) % fotos.length);
    }

    function mostrarAnterior() {
        mostrarImagem((indiceAtual - 1 + fotos.length) % fotos.length);
    }

    function renderizarMiniaturas() {
        thumbnailsContainer.innerHTML = "";
        fotos.forEach((foto, i) => {
            const img = document.createElement("img");
            img.src = foto;
            img.addEventListener("click", () => mostrarImagem(i));
            if (i === indiceAtual) img.classList.add("active");
            thumbnailsContainer.appendChild(img);
        });
    }

    // Eventos do modal
    nextBtn.addEventListener("click", e => { e.stopPropagation(); mostrarProximo(); });
    prevBtn.addEventListener("click", e => { e.stopPropagation(); mostrarAnterior(); });
    closeBtn.addEventListener("click", () => modal.style.display = "none");
    modal.addEventListener("click", () => modal.style.display = "none");
    modalImg.addEventListener("click", e => e.stopPropagation());

    document.addEventListener("keydown", (e) => {
        if(modal.style.display === "flex") {
            if(e.key === "ArrowRight") mostrarProximo();
            if(e.key === "ArrowLeft") mostrarAnterior();
            if(e.key === "Escape") modal.style.display = "none";
        }
    });
});
</script>
=======
<script src="{{url_for('static', filename='js/perfil.js')}}"></script>
>>>>>>> ace7ced (Implementado js e outras funcionalidades)

{% endblock %}
